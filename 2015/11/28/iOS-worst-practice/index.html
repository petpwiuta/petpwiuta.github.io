<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>iOS worst practice | Ney的技术博客</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">iOS worst practice</h1><a id="logo" href="/.">Ney的技术博客</a><p class="description">Learning，sharing，improving</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">iOS worst practice</h1><div class="post-meta">Nov 28, 2015<span> | </span><span class="category"><a href="/categories/iOS开发/">iOS开发</a></span></div><div class="post-content"><h1 id="iOS-worst-practice"><a href="#iOS-worst-practice" class="headerlink" title="iOS worst practice"></a>iOS worst practice</h1><p>最近在重构公司的项目，随着对项目的逐渐深入（被坑的次数越来越多），被各路大牛的神迹所折服，以至于感觉这些人是不是我们竞争对手派来的卧底。这些坑可以算是iOS worst practice了，在这里总结一下。</p>
<h2 id="命名的问题"><a href="#命名的问题" class="headerlink" title="命名的问题"></a>命名的问题</h2><p>给变量或者类以及方法起名能从一个侧面反映出一个程序员的水平以及项目的管理情况。在这个项目中，方法名、变量名和类名都没有统一，而且相关业务命名也没有规定。比如用于引导页面就有<code>TechView</code>、<code>IntroduceView</code>、<code>guideView</code>等，而下面的这些命名真是让人看了直接让人凌乱：</p>
<p>方法：</p>
<p><code>-(void)preTeachView2KnowActionWithNoShow:(UIButton *)sender</code></p>
<p><code>-(void)setTableView_Up_Down_NoHidden</code></p>
<p>变量：</p>
<p><code>#define fuckvalue   -34</code></p>
<p><code>_info_tmp</code></p>
<p><code>NSString *fuck1;</code></p>
<p><code>NSString *fuck2;</code></p>
<p>类:</p>
<p><code>@interface New_AdPersonViewController : New_PersonDetailViewController</code></p>
<h2 id="代码复用性"><a href="#代码复用性" class="headerlink" title="代码复用性"></a>代码复用性</h2><p>不会Ctrl-C/Ctrl-V的程序员不是好程序员，不过有些人玩得太high了，看你的工程中到处都是下面这些代码的时候你是什么感觉</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath</div><div class="line">&#123;</div><div class="line">    UITableViewCell *cell;</div><div class="line">    if(indexPath.section == 0)</div><div class="line">    &#123;</div><div class="line">        cell = [self setTableView:tableView CellForRowAtIndexPath:indexPath section:0];</div><div class="line">    &#125;</div><div class="line">    else if(indexPath.section == 1)</div><div class="line">    &#123;</div><div class="line">        cell = [self setTableView:tableView CellForRowAtIndexPath:indexPath section:1];</div><div class="line">    &#125;</div><div class="line">    else if(indexPath.section == 2)</div><div class="line">    &#123;</div><div class="line">        cell = [self setTableView:tableView CellForRowAtIndexPath:indexPath section:2];</div><div class="line">    &#125;</div><div class="line">    else if(indexPath.section == 3)</div><div class="line">    &#123;</div><div class="line">        cell = [self setTableView:tableView CellForRowAtIndexPath:indexPath section:3];</div><div class="line">    &#125;</div><div class="line">    else if(indexPath.section == 4)</div><div class="line">    &#123;</div><div class="line">        cell = [self setTableView:tableView CellForRowAtIndexPath:indexPath section:4];</div><div class="line">    &#125;</div><div class="line">    else if(indexPath.section == 5)</div><div class="line">    &#123;</div><div class="line">        cell = [self setTableView:tableView CellForRowAtIndexPath:indexPath section:5];</div><div class="line">    &#125;</div><div class="line">    else if(indexPath.section == 6)</div><div class="line">    &#123;</div><div class="line">        cell = [self setTableView:tableView CellForRowAtIndexPath:indexPath section:6];</div><div class="line">    &#125;</div><div class="line">    else if(indexPath.section == 7)</div><div class="line">    &#123;</div><div class="line">        cell = [self setTableView:tableView CellForRowAtIndexPath:indexPath section:7];</div><div class="line">    &#125;</div><div class="line">    else if(indexPath.section == 8)</div><div class="line">    &#123;</div><div class="line">        cell = [self setTableView:tableView CellForRowAtIndexPath:indexPath section:8];</div><div class="line">    &#125;</div><div class="line">    return cell;</div><div class="line">&#125;</div><div class="line"></div><div class="line"> NSString *sectionTitle = @&quot;&quot;;</div><div class="line">        if(indexPath.section == 0)</div><div class="line">        &#123;</div><div class="line">            sectionTitle = [_arraySections objectAtIndex:0];</div><div class="line">        &#125;</div><div class="line">        else if(indexPath.section == 1)</div><div class="line">        &#123;</div><div class="line">            sectionTitle = [_arraySections objectAtIndex:1];</div><div class="line">        &#125;</div><div class="line">        else if(indexPath.section == 2)</div><div class="line">        &#123;</div><div class="line">            sectionTitle = [_arraySections objectAtIndex:2];</div><div class="line">        &#125;</div><div class="line">        else if(indexPath.section == 3)</div><div class="line">        &#123;</div><div class="line">            sectionTitle = [_arraySections objectAtIndex:3];</div><div class="line">        &#125;</div><div class="line">        else if(indexPath.section == 4)</div><div class="line">        &#123;</div><div class="line">            sectionTitle = [_arraySections objectAtIndex:4];</div><div class="line">        &#125;</div><div class="line">        else if(indexPath.section == 5)</div><div class="line">        &#123;</div><div class="line">            sectionTitle = [_arraySections objectAtIndex:5];</div><div class="line">        &#125;</div><div class="line">        else if(indexPath.section == 6)</div><div class="line">        &#123;</div><div class="line">            sectionTitle = [_arraySections objectAtIndex:6];</div><div class="line">        &#125;</div><div class="line">        else if(indexPath.section == 7)</div><div class="line">        &#123;</div><div class="line">            sectionTitle = [_arraySections objectAtIndex:7];</div><div class="line">        &#125;</div><div class="line">        else if(indexPath.section == 8)</div><div class="line">        &#123;</div><div class="line">            sectionTitle = [_arraySections objectAtIndex:8];</div><div class="line">         &#125;</div></pre></td></tr></table></figure>
<p>反正我看了第一感觉是，我x、原来以前公司发工资是按代码行数算钱的······</p>
<h2 id="没有面向对象思想"><a href="#没有面向对象思想" class="headerlink" title="没有面向对象思想"></a>没有面向对象思想</h2><ul>
<li>在ViewController基类中放一些特定的业务逻辑，然后所有的子类中都有一堆阴魂不散的代码</li>
<li>该封装的不封装，完成同样功能的函数在每个用到的地方都一个copy，一旦逻辑变动，改起来真心好爽</li>
<li>不该封装的乱封装，封装的暴露的方法完全不知道是干什么的，想要类运行还必须先设定某些它所依赖的全局变量</li>
</ul>
<h2 id="滥用单例、通知"><a href="#滥用单例、通知" class="headerlink" title="滥用单例、通知"></a>滥用单例、通知</h2><p>实际上工程里面单例就一个，不过单例对象把所有的活都干，所以可以理解为整个工程的架构，都是面向过程的，全部模块水乳交融、浑然一体。用户数据保存靠这个单例、具体页面数据设置靠靠这个单例、应用行为配置靠靠这个单例······然后大部分的ViewController想要正常工作都得提前把所需的数据在这个单例中配置好，想想都佩服那些大神的记忆力；对于滥用通知的后果和单例一样，当你见到一个控制器中有一二十条通知齐刷刷地写在初始化方法里的时候有什么感觉。想想都有点小激动，你确定不是在逗我？</p>
<h2 id="各种脑洞大开的实现"><a href="#各种脑洞大开的实现" class="headerlink" title="各种脑洞大开的实现"></a>各种脑洞大开的实现</h2><p>看见一个函数名叫做addRequestQueue的时候你会有什么反应，大部分人肯定想着肯定会是生成请求实例、有请求队列对它们进行管理······对此我只能说大神的想象力是无穷的，这个addRequestQueue是用<strong>递归的方式</strong>发送的请求，在网络请求成功或失败的闭包中会再次调用自己发送请求，这时候我终于明白这个队列是在哪儿了。</p>
<p>类似的例子还有很多，一次次的被大神的想象力所折服！</p>
</div><div class="tags"></div><div class="post-nav"><a href="/2016/09/13/cell-height-calc-with-autolayout/" class="pre">项目中Cell自动计算行高的实践</a><a href="/2015/07/25/Autolayout-自定义View/" class="next">Autolayout笔记:自定义View</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CS基础/">CS基础</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS开发/">iOS开发</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/11/13/给Xcode8安装插件/">给Xcode8安装插件</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/10/NSURLProtocol介绍/">NSURLProtocol总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/20/iOS平台Webview和原生代码交互/">iOS平台Webview和原生代码交互</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/06/HTTP权威指南/">《HTTP权威指南》笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/16/What's-New-in-iOS10/">What's New in iOS</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/13/cell-height-calc-with-autolayout/">项目中Cell自动计算行高的实践</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/28/iOS-worst-practice/">iOS worst practice</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/25/Autolayout-自定义View/">Autolayout笔记:自定义View</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/18/AutoLayout-基础概念/">Autolayout笔记:基本概念</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Ney的技术博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>